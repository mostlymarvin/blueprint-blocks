!function(e){var t={};function n(l){if(t[l])return t[l].exports;var s=t[l]={i:l,l:!1,exports:{}};return e[l].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=e,n.c=t,n.d=function(e,t,l){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:l})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var l=Object.create(null);if(n.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)n.d(l,s,function(t){return e[t]}.bind(null,s));return l},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);n(1),n(2),n(3),n(4),n(5)},function(e,t,n){e.exports=n.p+"blocks.style.build.css"},function(e,t,n){e.exports=n.p+"blocks.editor.build.css"},function(e,t,n){e.exports=n.p+"blocks.buttons.build.css"},function(e,t){var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var l=t[n];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}return function(t,n,l){return n&&e(t.prototype,n),l&&e(t,l),t}}();var l=wp.i18n.__,s=wp.blocks.registerBlockType,i=wp.components,o=i.SelectControl,r=i.ToggleControl,a=i.TextControl,u=(i.Panel,i.PanelBody),p=i.PanelRow,c=wp.element,m=c.Component,b=(c.Fragment,wp.editor),h=b.RichText,g=b.InspectorControls,d=b.PanelColorSettings,k=(b.getColorClassName,function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.state=e.constructor.getInitialState(e.props.attributes.selectedPost),e.getBlueprintApi=e.getBlueprintApi.bind(e),e.getBlueprintApi(),e.getOptions=e.getOptions.bind(e),e.getOptions(),e.onChangeSelectPost=e.onChangeSelectPost.bind(e),e.onChangeTitlePrefix=e.onChangeTitlePrefix.bind(e),e.onChangeTagline=e.onChangeTagline.bind(e),e.onChangeFlexDirection=e.onChangeFlexDirection.bind(e),e.onChangeCustomBlurb=e.onChangeCustomBlurb.bind(e),e.onChangeButtonsLabel=e.onChangeButtonsLabel.bind(e),e.onChangeAddPrefix=e.onChangeAddPrefix.bind(e),e.getTitlePrefixToggle=e.getTitlePrefixToggle.bind(e),e.getTagline=e.getTagline.bind(e),e.getPreviewBlurb=e.getPreviewBlurb.bind(e),e.getCoverToggle=e.getCoverToggle.bind(e),e.getButtonsLabel=e.getButtonsLabel.bind(e),e.getButtons=e.getButtons.bind(e),e.getButtonSegment=e.getButtonSegment.bind(e),e.getBookMedia=e.getBookMedia.bind(e),e.onChangeTextColor=e.onChangeTextColor.bind(e),e.onChangeBGColor=e.onChangeBGColor.bind(e),e.getColorSettings=e.getColorSettings.bind(e),e.getBlockSettings=e.getBlockSettings.bind(e),e.getBookSelect=e.getBookSelect.bind(e),e.onChangeButtonBGColor=e.onChangeButtonBGColor.bind(e),e.onChangeButtonColor=e.onChangeButtonColor.bind(e),e.onChangeMoreLink=e.onChangeMoreLink.bind(e),e.getMoreLinkToggle=e.getMoreLinkToggle.bind(e),e.onChangeShowReadMore=e.onChangeShowReadMore.bind(e),e.onChangeShowBuyLinks=e.onChangeShowBuyLinks.bind(e),e.getButtonToggle=e.getButtonToggle.bind(e),e.onChangeReadMoreLink=e.onChangeReadMoreLink.bind(e),e.onChangeReadMoreText=e.onChangeReadMoreText.bind(e),e.getSampleLinkToggle=e.getSampleLinkToggle.bind(e),e.onChangeShowSampleLinks=e.onChangeShowSampleLinks.bind(e),e.getSampleLinks=e.getSampleLinks.bind(e),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,m),n(t,null,[{key:"getInitialState",value:function(e){return{posts:[],selectedPost:e,post:{}}}}]),n(t,[{key:"onChangeSelectPost",value:function(e){var t=this.state.posts.find(function(t){return t.id==parseInt(e)});this.setState({selectedPost:parseInt(e),post:t});var n=t.mbt_book_teaser[0],l=t.excerpt.rendered,s=t.mbt_sample_audio[0],i=t.mbt_unique_id_asin[0],o=t.mbt_buybuttons[0],r=t.mbt_editor_style_url,a=t.mbt_book_image_id[0];this.getBookMedia(a),this.props.setAttributes({selectedPost:parseInt(e),title:t.title.rendered,link:t.link,buylinks:o,tagline:n,blurb:l,audioSample:s,bookSample:i,buttonsLabel:"Now Available From",titlePrefix:"",styleURL:r,customBlurb:l,customTagline:n,readMoreLink:t.link,showReadMore:!0})}},{key:"getBookMedia",value:function(e){var t=this;new wp.media.model.Attachment.get(e).fetch().then(function(e){t.props.setAttributes({cover:e.url})})}},{key:"onChangeTitlePrefix",value:function(e){this.props.setAttributes({titlePrefix:e})}},{key:"onChangeCustomBlurb",value:function(e){this.props.setAttributes({customBlurb:e})}},{key:"onChangeReadMoreLink",value:function(e){this.props.setAttributes({readMoreLink:e})}},{key:"onChangeReadMoreText",value:function(e){this.props.setAttributes({readMoreText:e})}},{key:"onChangeTagline",value:function(e){this.props.setAttributes({customTagline:e})}},{key:"onChangeButtonsLabel",value:function(e){this.props.setAttributes({buttonsLabel:e})}},{key:"onChangeFlexDirection",value:function(){this.props.attributes.flexReverse?this.props.setAttributes({flexReverse:!1,flexClass:"flex-row"}):this.props.setAttributes({flexReverse:!0,flexClass:"flex-row-reverse"})}},{key:"onChangeAddPrefix",value:function(){this.props.attributes.addTitlePrefix?this.props.setAttributes({addTitlePrefix:!1}):this.props.setAttributes({addTitlePrefix:!0})}},{key:"onChangeShowReadMore",value:function(){this.props.attributes.showReadMore?this.props.setAttributes({showReadMore:!1}):this.props.setAttributes({showReadMore:!0})}},{key:"onChangeShowBuyLinks",value:function(){this.props.attributes.showBuyLinks?this.props.setAttributes({showBuyLinks:!1}):this.props.setAttributes({showBuyLinks:!0})}},{key:"onChangeShowSampleLinks",value:function(){this.props.attributes.showSampleLinks?this.props.setAttributes({showSampleLinks:!1}):this.props.setAttributes({showSampleLinks:!0})}},{key:"onChangeTextColor",value:function(e){this.props.setAttributes({colorText:e})}},{key:"onChangeBGColor",value:function(e){this.props.setAttributes({colorBG:e})}},{key:"onChangeButtonColor",value:function(e){this.props.setAttributes({colorMoreLink:e})}},{key:"onChangeButtonBGColor",value:function(e){this.props.setAttributes({colorMoreLinkBG:e})}},{key:"onChangeMoreLink",value:function(e){this.props.setAttributes({moreLink:e})}},{key:"getBlockSettings",value:function(e,t){return this.props.attributes.title?null:wp.element.createElement("div",{className:"block-settings"},wp.element.createElement("div",{className:"block-message"},t),this.getBookSelect(e))}},{key:"getBookSelect",value:function(e){return wp.element.createElement(o,{onChange:this.onChangeSelectPost,value:this.props.attributes.selectedPost,label:l("Select a Book"),options:e,className:"book-select"})}},{key:"getButtonsLabel",value:function(){var e={backgroundColor:this.props.attributes.colorBG,color:this.props.attributes.colorText};return wp.element.createElement("h4",{className:"buttons-label noneditable",style:e},this.props.attributes.buttonsLabel)}},{key:"getTagline",value:function(){return this.props.attributes.title?wp.element.createElement(h,{tagName:"div",placeholder:"Lorem Ipsum Dolor Sunt...",className:"preview-tagline",value:this.props.attributes.customTagline,onChange:this.onChangeTagline,keepPlaceholderOnFocus:!0}):null}},{key:"getPreviewBlurb",value:function(){return this.props.attributes.title?wp.element.createElement("div",{class:"preview-blurb"},wp.element.createElement(h,{tagName:"div",multiline:"p",placeholder:"Morbi leo risus, porta ac consectetur ac, vestibulum at eros. Nullam id dolor id nibh ultricies vehicula ut id elit. Nulla vitae elit libero, a pharetra augue.",className:"custom-blurb",value:this.props.attributes.customBlurb,onChange:this.onChangeCustomBlurb,keepPlaceholderOnFocus:!0}),this.getReadMoreLink()):null}},{key:"getReadMoreLink",value:function(){var e="button button-primary button-small bpb-more",t=this.props.attributes.colorMoreLinkBG,n=this.props.attributes.colorMoreLink,l=null;return t&&(l={backgroundColor:t}),n&&(l={color:n}),n&&t&&(l={backgroundColor:t,color:n}),(t||n)&&(e="button button-custom button-small bpb-more"),this.props.attributes.showReadMore&&wp.element.createElement("a",{className:e,style:l,href:this.props.attributes.readMoreLink},this.props.attributes.readMoreText)}},{key:"getButtons",value:function(){var e=this;return this.props.attributes.buylinks?wp.element.createElement("div",{className:"mbt-book-buybuttons blueprint"},this.props.attributes.buylinks.map(function(t,n){return wp.element.createElement("div",{className:"mbt-book-buybutton"},wp.element.createElement("a",{className:"image-link",href:t.url},wp.element.createElement("img",{className:"image-link",src:e.props.attributes.styleURL+t.store+"_button.png",alt:"buy from "+t.store})))})):null}},{key:"getSampleLinks",value:function(){return this.props.attributes.showSampleLinks&&wp.element.createElement("div",{className:"cover-links"},this.props.attributes.bookSample&&wp.element.createElement("span",null,"View Book Sample"),this.props.attributes.bookSample&&this.props.attributes.audioSample&&wp.element.createElement("span",{className:"divider"}," | "),this.props.attributes.audioSample&&wp.element.createElement("span",null,"Hear Audiobook Sample"))}},{key:"getCoverToggle",value:function(){return this.props.attributes.cover?wp.element.createElement(p,null,wp.element.createElement(r,{label:"Reverse Cover Position",help:"Default displays cover to left",checked:!!this.props.attributes.flexReverse,onChange:this.onChangeFlexDirection,className:"flex-direction"})):null}},{key:"getButtonSegment",value:function(){return this.props.attributes.title?wp.element.createElement("div",{className:"buylinks"},wp.element.createElement(this.getButtonsLabel,null),wp.element.createElement(this.getButtons,null)):null}},{key:"getButtonToggle",value:function(){return wp.element.createElement(p,{className:"display-block"},wp.element.createElement(r,{label:"Show Buy Links?",checked:!!this.props.attributes.showBuyLinks,onChange:this.onChangeShowBuyLinks}),this.props.attributes.showBuyLinks&&wp.element.createElement(a,{placeholder:"Now Available From",label:"Buy Link Section Label",value:this.props.attributes.buttonsLabel,onChange:this.onChangeButtonsLabel,keepPlaceholderOnFocus:!0}))}},{key:"getTitlePrefixToggle",value:function(){return wp.element.createElement(p,{className:"display-block"},wp.element.createElement(r,{label:"Add Prefix to Title",help:"ie, 'Coming Soon' or 'Just Released', etc.",checked:!!this.props.attributes.addTitlePrefix,onChange:this.onChangeAddPrefix}),this.props.attributes.addTitlePrefix&&wp.element.createElement(a,{placeholder:"Coming Soon, etc.",value:this.props.attributes.titlePrefix,onChange:this.onChangeTitlePrefix,keepPlaceholderOnFocus:!0}))}},{key:"getSampleLinkToggle",value:function(){return wp.element.createElement(p,{className:"display-block"},wp.element.createElement(r,{label:"Show Book Sample Links?",help:"By default, shows audiobook and book sample links under the cover, if the links are available.",checked:!!this.props.attributes.showSampleLinks,onChange:this.onChangeShowSampleLinks}))}},{key:"getMoreLinkToggle",value:function(){return wp.element.createElement(p,{className:"display-block"},wp.element.createElement(r,{label:"Show 'Read More' Link?",checked:!!this.props.attributes.showReadMore,onChange:this.onChangeShowReadMore}),this.props.attributes.showReadMore&&wp.element.createElement(p,{className:"display-block"},wp.element.createElement(a,{placeholder:"Read More",value:this.props.attributes.readMoreText,onChange:this.onChangeReadMoreText,keepPlaceholderOnFocus:!0}),wp.element.createElement(a,{placeholder:this.props.attributes.link,value:this.props.attributes.readMoreLink,onChange:this.onChangeReadMoreLink,keepPlaceholderOnFocus:!0})))}},{key:"getColorSettings",value:function(){return wp.element.createElement(d,{title:l("Colors","blueprint-blocks"),initialOpen:!1,colorSettings:[{value:this.props.attributes.colorText,onChange:this.onChangeTextColor,label:l("Text Color","blueprint-blocks")},{value:this.props.attributes.colorBG,onChange:this.onChangeBGColor,label:l("Background Color","blueprint-blocks")},{value:this.props.attributes.colorMoreLinkBG,onChange:this.onChangeButtonBGColor,label:l("Read More Button Background Color","blueprint-blocks")},{value:this.props.attributes.colorMoreLink,onChange:this.onChangeButtonColor,label:l("Read More Button Text Color","blueprint-blocks")}]})}},{key:"getBlueprintApi",value:function(){var e=this;wp.api.models.Status.extend({urlRoot:wpApiSettings.root+"blueprint-mmk/v1/blueprint",defaults:{type:"blueprint"}});(new(wp.api.collections.Statuses.extend({url:wpApiSettings.root+"blueprint-mmk/v1/blueprint"}))).fetch().then(function(t){e.props.setAttributes({mbtActive:t.mbt_active})})}},{key:"getOptions",value:function(){var e=this;wp.api.models.Post.extend({urlRoot:wpApiSettings.root+"wp/v2/mbt_book",defaults:{type:"mbt_book"}});(new(wp.api.collections.Posts.extend({url:wpApiSettings.root+"wp/v2/mbt_book"}))).fetch().then(function(t){if(t&&0!==e.state.selectedPost){var n=t.find(function(t){return t.id==e.state.selectedPost});e.setState({post:n,posts:t})}else e.setState({posts:t})})}},{key:"render",value:function(){var e=[{value:0,label:l("Select a Post")}],t="",n="block-preview",s={backgroundColor:this.props.attributes.colorBG,color:this.props.attributes.colorText},i={color:this.props.attributes.colorText};return this.props.className+=" loading",this.state.posts.length>0?this.state.posts.forEach(function(t){e.push({value:t.id,label:t.title.rendered})}):t="No books found. Please create books first.",void 0!==this.state.post&&this.state.post.hasOwnProperty("title")?this.props.className+=" has-post":this.props.className+=" no-post",void 0!==this.props.attributes.title&&(n="block-preview active-preview"),wp.element.createElement("div",{className:this.props.className,style:s},wp.element.createElement("div",null,wp.element.createElement(g,null,wp.element.createElement(this.getColorSettings,null),wp.element.createElement(u,{title:"Book Settings",initialOpen:!0,className:"blueprint-panel-body"},wp.element.createElement(p,{className:"book-select"},this.getBookSelect(e)),wp.element.createElement(this.getCoverToggle,null),wp.element.createElement(this.getSampleLinkToggle,null),wp.element.createElement(this.getTitlePrefixToggle,null),wp.element.createElement(this.getButtonToggle,null),wp.element.createElement(this.getMoreLinkToggle,null)))),this.props.attributes.mbtActive?this.getBlockSettings(e,t):wp.element.createElement("div",{className:"block-settings"},wp.element.createElement("div",{className:"block-message"},wp.element.createElement("span",null,"MyBookTable is not active."),wp.element.createElement("span",null," Please activate ",wp.element.createElement("a",{href:"https://wordpress.org/plugins/mybooktable/",target:"_blank"},"MyBookTable")," and create books first."))),wp.element.createElement("div",{className:n},wp.element.createElement("div",{className:"inner-preview is-flex "+this.props.attributes.flexClass},wp.element.createElement("div",{className:"preview-left"},this.props.attributes.cover&&wp.element.createElement("img",{src:this.props.attributes.cover,className:"preview-cover"}),wp.element.createElement(this.getSampleLinks,null)),wp.element.createElement("div",{className:"preview-right"},wp.element.createElement("div",{className:"preview-right-top"},wp.element.createElement("h2",{className:"preview-title",style:i},this.props.attributes.titlePrefix&&this.props.attributes.addTitlePrefix&&wp.element.createElement("span",{className:"title-prefix"},this.props.attributes.titlePrefix," "),wp.element.createElement("span",{className:"title"},this.props.attributes.title)),wp.element.createElement(this.getTagline,null),wp.element.createElement(this.getPreviewBlurb,null)),this.props.attributes.showBuyLinks&&wp.element.createElement(this.getButtonSegment,null)))))}}]),t}());s("blueprint-blocks/mbt-book",{title:l("Book Preview"),icon:"book",category:"blueprint-blocks",keywords:[l("blueprint-blocks — mbt-book"),l("Book")],attributes:{selectedPost:{type:"number",default:null},addTitlePrefix:{type:"boolean",default:!1},audioSample:{type:"string",default:""},blurb:{type:"string"},bookSample:{type:"string",default:""},buttonsLabel:{type:"string",default:"Now Available From"},buylinks:{type:"array"},cover:{type:"string"},customBlurb:{type:"string"},customTagline:{type:"string"},flexClass:{type:"string",default:"flex-row"},flexReverse:{type:"boolean",default:!1},link:{type:"string",selector:"a"},styleURL:{type:"string"},tagline:{type:"string"},title:{type:"string"},titlePrefix:{type:"string"},colorText:{type:"string",default:"#333333"},colorBG:{type:"string",default:"#ffffff"},colorMoreLink:{type:"string"},colorMoreLinkBG:{type:"string"},mbtActive:{type:"boolean",default:"true"},showReadMore:{type:"boolean",default:!0},showBuyLinks:{type:"boolean",default:!0},readMoreLink:{type:"string"},readMoreText:{type:"string",default:"Read More"},showSampleLinks:{type:"boolean",default:!0}},edit:k,save:function(e){return null}})},function(e,t){var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var l=t[n];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}return function(t,n,l){return n&&e(t.prototype,n),l&&e(t,l),t}}();var l=wp.i18n.__,s=wp.blocks.registerBlockType,i=wp.components,o=i.SelectControl,r=i.ToggleControl,a=wp.element.Component,u=wp.editor,p=u.RichText,c=u.MediaUpload,m=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.state=e.constructor.getInitialState(e.props.attributes.selectedUser),e.getUsers=e.getUsers.bind(e),e.getUsers(),e.getBlueprintApi=e.getBlueprintApi.bind(e),e.getBlueprintApi(),e.onChangeSelectUser=e.onChangeSelectUser.bind(e),e.getSocialLinks=e.getSocialLinks.bind(e),e.getSiteLinks=e.getSiteLinks.bind(e),e.getUserLinks=e.getUserLinks.bind(e),e.onSelectImage=e.onSelectImage.bind(e),e.getLinkTypeToggle=e.getLinkTypeToggle.bind(e),e.onChangeLinkType=e.onChangeLinkType.bind(e),e.onChangeProfileTitle=e.onChangeProfileTitle.bind(e),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a),n(t,null,[{key:"getInitialState",value:function(e){return{users:[],selectedUser:e,user:{}}}}]),n(t,[{key:"onChangeSelectUser",value:function(e){var t=this.state.users.find(function(t){return t.id==parseInt(e)});this.setState({selectedUser:parseInt(e),user:t});var n=t.profile_display_name?t.profile_display_name[0]:null,l=t.description?t.description:null;console.log(l);var s=[{name:"amazon",link:t.amazon_link?t.amazon_link:null},{name:"bookbub",link:t.bookbub_link?t.bookbub_link:null},{name:"facebook",link:t.facebook_link?t.facebook_link:null},{name:"instagram",link:t.instagram_link?t.instagram_link:null},{name:"linkedin",link:t.linkedin_link?t.linkedin_link:null},{name:"pinterest",link:t.pinterest_link?t.pinterest_link:null},{name:"twitter",link:t.twitter_link?t.twitter_link:null}];this.props.setAttributes({selectedUser:parseInt(e),userName:n,userDescription:l,userLinks:s,customTitle:this.props.attributes.customTitle?this.props.attributes.customTitle:n})}},{key:"onChangeProfileTitle",value:function(e){this.props.setAttributes({customTitle:e})}},{key:"onChangeLinkType",value:function(){this.props.attributes.useSiteLinks?this.props.setAttributes({useSiteLinks:!1}):this.props.setAttributes({useSiteLinks:!0})}},{key:"getUsers",value:function(){var e=this;return(new wp.api.collections.Users).fetch().then(function(t){if(t&&0!==e.state.selectedUser){var n=t.find(function(t){return t.id==e.state.selectedUser});e.setState({user:n,users:t})}else e.setState({users:t})})}},{key:"getBlueprintApi",value:function(){var e=this;wp.api.models.Status.extend({urlRoot:wpApiSettings.root+"blueprint-mmk/v1/blueprint",defaults:{type:"blueprint"}});(new(wp.api.collections.Statuses.extend({url:wpApiSettings.root+"blueprint-mmk/v1/blueprint"}))).fetch().then(function(t){e.props.setAttributes({siteLinks:t.blueprint_social.links,siteLinkDisplay:t.blueprint_social.display})})}},{key:"getLinkTypeToggle",value:function(){return wp.element.createElement(r,{label:"Use site-wide social media links instead of user profile social links?",checked:!!this.props.attributes.useSiteLinks,onChange:this.onChangeLinkType,className:"link-type"})}},{key:"getUserLinks",value:function(){return this.props.attributes.userLinks?wp.element.createElement("div",{className:"blueprint-profile-links user-links"},wp.element.createElement("ul",null,this.props.attributes.userLinks.map(function(e,t){return wp.element.createElement("li",{className:"profile-link"},wp.element.createElement("a",{className:e.name+" icon-"+e.name,href:e.link},wp.element.createElement("span",null,e.name)))}))):null}},{key:"getSiteLinks",value:function(){return this.props.attributes.siteLinks?wp.element.createElement("div",{className:"blueprint-profile-links site-links"},wp.element.createElement("ul",null,this.props.attributes.siteLinks.map(function(e,t){return wp.element.createElement("li",{className:"profile-link"},wp.element.createElement("a",{className:e.network+" icon-"+e.network,href:e.url},wp.element.createElement("span",null,e.network)))}))):null}},{key:"getSocialLinks",value:function(){return this.props.attributes.useSiteLinks?wp.element.createElement(this.getSiteLinks,null):wp.element.createElement(this.getUserLinks,null)}},{key:"onSelectImage",value:function(e){this.props.setAttributes({imgUrl:e.sizes.full.url})}},{key:"render",value:function(){var e=this,t=[{value:0,label:l("Select a User")}];return this.props.className+=" loading",this.state.users.length>0?this.state.users.forEach(function(e){t.push({value:e.id,label:e.name})}):l("No users found."),void 0!==this.state.user&&this.state.user.hasOwnProperty("name")?(wp.element.createElement("div",{className:"user"},wp.element.createElement("a",{href:this.state.user.link},this.state.user.name)),this.props.className+=" has-user"):this.props.className+=" no-user",wp.element.createElement("div",{className:this.props.className},wp.element.createElement(o,{onChange:this.onChangeSelectUser,value:this.props.attributes.selectedUser,label:l("Select an Author"),options:t,className:"author-select"}),wp.element.createElement(this.getLinkTypeToggle,null),wp.element.createElement("div",{className:"profile-preview"},wp.element.createElement("h3",{className:"profile-title"},wp.element.createElement(p,{tagName:"span",placeholder:this.props.attributes.customTitle,className:"buttons-label",value:this.props.attributes.customTitle,onChange:this.onChangeProfileTitle,keepPlaceholderOnFocus:!0})),wp.element.createElement("div",{className:"inner "},wp.element.createElement("div",{className:"profile-main"},wp.element.createElement(c,{onSelect:this.onSelectImage,render:function(t){var n=t.open;return wp.element.createElement("div",{className:"media"},wp.element.createElement("span",{className:"dashicons dashicons-edit edit-media",onClick:n}),wp.element.createElement("img",{src:e.props.attributes.imgUrl,onClick:n}))}}),wp.element.createElement("div",{class:"profile-data"},wp.element.createElement("div",{class:"profile-blurb"},this.props.attributes.userDescription))),wp.element.createElement(this.getSocialLinks,null))))}}]),t}();s("blueprint-blocks/blueprint-author",{title:l("Author Profile"),icon:"admin-users",category:"blueprint-blocks",keywords:[l("Author"),l("Blueprint"),l("Profile")],attributes:{selectedUser:{type:"number",default:null},userName:{type:"string"},userDescription:{type:"string"},customTitle:{type:"string"},useSiteLinks:{type:"boolean",default:!1},userLinks:{type:"array"},siteLinks:{type:"array"},siteLinkDisplay:{type:"array"},imgUrl:{type:"string",default:"http://placehold.it/500"}},edit:m,save:function(e){return wp.element.createElement("div",{className:e.className},wp.element.createElement("h3",{className:"profile-title"},wp.element.createElement("span",null,e.attributes.customTitle)),wp.element.createElement("div",{className:"inner is-flex"},wp.element.createElement("div",{className:"profile-main"},wp.element.createElement("div",{className:"media"},wp.element.createElement("img",{src:e.attributes.imgUrl,className:"profile-image"})),wp.element.createElement("div",{className:"profile-info"},wp.element.createElement(p.Content,{className:"profile-blurb",tagName:"div",multiline:"p",value:e.attributes.userDescription}))),wp.element.createElement("div",{className:"blueprint-profile-links"},wp.element.createElement("ul",null,e.attributes.useSiteLinks?e.attributes.siteLinks.map(function(e,t){return wp.element.createElement("li",{className:"profile-link"},wp.element.createElement("a",{className:e.network+" icon-"+e.network,href:e.url},wp.element.createElement("span",null,e.network)))}):e.attributes.userLinks.map(function(e,t){return wp.element.createElement("li",{className:"profile-link"},wp.element.createElement("a",{className:e.name+" icon-"+e.name,href:e.link},wp.element.createElement("span",null,e.name)))})))))}})}]);